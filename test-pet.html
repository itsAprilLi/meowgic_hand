<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ’¸çŒ«æµ‹è¯• - Meowgic Hand</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    padding: 20px;
    font-family: 'Press Start 2P', monospace;
    background: linear-gradient(135deg, #ffccf9, #99ccff);
    min-height: 100vh;
}

.test-container {
    max-width: 800px;
    margin: 0 auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.kitten {
    width: 200px;
    height: 200px;
    background: #ff69b4;
    border-radius: 50%;
    margin: 20px auto;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 60px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.kitten:hover {
    transform: scale(1.1);
}

.tool {
    position: absolute;
    width: 60px;
    height: 60px;
    font-size: 40px;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    border: 3px solid #ff69b4;
    box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
    z-index: 999;
    pointer-events: none;
}

.tool.active {
    display: flex !important;
    animation: toolPulse 1s ease-in-out infinite;
}

@keyframes toolPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.controls {
    text-align: center;
    margin: 20px 0;
}

.btn {
    margin: 5px;
    padding: 10px 20px;
    background: #ff69b4;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-family: inherit;
    font-size: 12px;
}

.btn:hover {
    background: #ff1493;
}

.feedback {
    text-align: center;
    margin: 20px 0;
    padding: 10px;
    background: #f0f8ff;
    border-radius: 5px;
    min-height: 50px;
    font-size: 10px;
}
</style>
</head>
<body>
<div class="test-container">
    <h1 style="text-align: center; font-size: 16px; margin-bottom: 20px;">ğŸ± Cat Petting Function Test</h1>
    
    <div class="kitten" id="test-kitten">ğŸ±</div>
    
    <!-- å·¥å…· -->
    <div id="brush-tool" class="tool">ğŸ–Œï¸</div>
    <div id="treat-tool" class="tool">ğŸŸ</div>
    <div id="catnip-tool" class="tool">ğŸŒ¿</div>
    
    <div class="controls">
        <button class="btn" onclick="testTool('brush')">ğŸ–Œï¸ Brush</button>
        <button class="btn" onclick="testTool('treat')">ğŸŸ Treat</button>
        <button class="btn" onclick="testTool('catnip')">ğŸŒ¿ Catnip</button>
        <button class="btn" onclick="hideAllTools()">âŒ Hide Tools</button>
    </div>

    <div class="feedback" id="feedback">
        Click the buttons above to test tool display and interaction effects!
    </div>
    
    <div style="text-align: center; margin-top: 20px;">
        <p style="font-size: 10px; color: #666;">
            This is a simplified test page to verify if the cat petting function works properly.<br>
            If the functions work here, the code logic is fine - camera or gesture recognition might be the issue.
        </p>
        <a href="pet-cat.html" style="color: #ff69b4; text-decoration: none; font-size: 10px;">
            â†’ Return to full cat petting page
        </a>
    </div>
</div>

<script>
let currentTool = null;
let interactionCount = 0;
const kittenName = 'Mochi';

const brushTool = document.getElementById('brush-tool');
const treatTool = document.getElementById('treat-tool');
const catnipTool = document.getElementById('catnip-tool');
const kitten = document.getElementById('test-kitten');
const feedback = document.getElementById('feedback');

// æµ‹è¯•å·¥å…·æ˜¾ç¤º
function testTool(toolType) {
    console.log(`æµ‹è¯•å·¥å…·: ${toolType}`);
    
    hideAllTools();
    
    let toolElement;
    switch (toolType) {
        case 'brush':
            toolElement = brushTool;
            break;
        case 'treat':
            toolElement = treatTool;
            break;
        case 'catnip':
            toolElement = catnipTool;
            break;
    }
    
    if (toolElement) {
        currentTool = toolType;
        toolElement.classList.add('active');
        toolElement.style.left = '50%';
        toolElement.style.top = '50%';
        toolElement.style.transform = 'translate(-50%, -50%)';
        
        // è§¦å‘äº’åŠ¨æ•ˆæœ
        triggerInteraction(toolType);
        
        // å·¥å…·è·Ÿéšé¼ æ ‡
        document.addEventListener('mousemove', updateToolPosition);
    }
}

// éšè—æ‰€æœ‰å·¥å…·
function hideAllTools() {
    [brushTool, treatTool, catnipTool].forEach(tool => {
        tool.classList.remove('active');
    });
    currentTool = null;
    document.removeEventListener('mousemove', updateToolPosition);
}

// æ›´æ–°å·¥å…·ä½ç½®
function updateToolPosition(e) {
    if (!currentTool) return;
    
    const toolElement = currentTool === 'brush' ? brushTool : 
                       currentTool === 'treat' ? treatTool : catnipTool;
    
    if (toolElement && toolElement.classList.contains('active')) {
        toolElement.style.left = (e.clientX - 30) + 'px';
        toolElement.style.top = (e.clientY - 30) + 'px';
        toolElement.style.transform = 'none';
    }
}

// è§¦å‘äº’åŠ¨æ•ˆæœ
function triggerInteraction(toolType) {
    interactionCount++;
    
    const messages = {
        brush: [`${kittenName}ï¼šå’•å™œå’•å™œ~ å¥½èˆ’æœï¼`, `${kittenName}æ­£åœ¨äº«å—æ¢³ç†å‘¢~`],
        treat: [`${kittenName}ï¼šè¿™ä¸ªçŒ«æ¡å¥½é¦™å•Šï¼`, `${kittenName}è¿«ä¸åŠå¾…åœ°èˆ”èµ·æ¥äº†`],
        catnip: [`${kittenName}ï¼šå“‡ï¼çŒ«è–„è·ï¼`, `${kittenName}å…´å¥‹å¾—åœ¨åœ°ä¸Šç¿»æ»š`]
    };
    
    const toolMessages = messages[toolType];
    const randomMessage = toolMessages[Math.floor(Math.random() * toolMessages.length)];
    
    feedback.textContent = randomMessage;
    
    // å°çŒ«ååº”åŠ¨ç”»
    switch (toolType) {
        case 'brush':
            kitten.style.animation = 'none';
            setTimeout(() => {
                kitten.style.animation = 'sway 2s ease-in-out';
            }, 10);
            break;
        case 'treat':
            kitten.style.animation = 'none';
            setTimeout(() => {
                kitten.style.animation = 'jump 0.5s ease-in-out 3';
            }, 10);
            break;
        case 'catnip':
            kitten.style.animation = 'none';
            setTimeout(() => {
                kitten.style.animation = 'spin 1s ease-in-out';
            }, 10);
            break;
    }
    
    // 3ç§’åæ¢å¤
    setTimeout(() => {
        feedback.textContent = `ç»§ç»­å’Œ${kittenName}äº’åŠ¨å§ï¼è¯•è¯•ä¸åŒçš„å·¥å…·~`;
        kitten.style.animation = '';
    }, 3000);
}

// æ·»åŠ åŠ¨ç”»æ ·å¼
const style = document.createElement('style');
style.textContent = `
@keyframes sway {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-5deg); }
    75% { transform: rotate(5deg); }
}

@keyframes jump {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-20px) scale(1.1); }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
`;
document.head.appendChild(style);
</script>
</body>
</html>
